# Basic DRM support
CONFIG_DRM=y
CONFIG_DRM_KMS_HELPER=y
CONFIG_DRM_KMS_FB_HELPER=y

# Raspberry Pi specific GPU drivers
CONFIG_DRM_VC4=y
CONFIG_DRM_V3D=y
CONFIG_DRM_VC4_HDMI_CEC=y
CONFIG_I2C_BCM2835=y
CONFIG_I2C_BRCMSTB=y

# Frame buffer and console support
CONFIG_FB=y
CONFIG_FB_MODE_HELPERS=y
CONFIG_FB_BCM2708=n  # Disable legacy framebuffer
CONFIG_FRAMEBUFFER_CONSOLE=y

# Memory management for GPU
CONFIG_CMA=y
CONFIG_DMA_CMA=y
CONFIG_DRM_GEM_CMA_HELPER=y

# Optional debugging
CONFIG_DRM_VC4_DEBUGFS=y
CONFIG_DRM_V3D_DEBUGFS=y

CONFIG_DRM=y
CONFIG_DRM_VC4 is not set
CONFIG_DRM_VC4=y
CONFIG_DRM_V3D=y
CONFIG_DRM_KMS_HELPER=y
CONFIG_DRM_GEM_CMA_HELPER=y
CONFIG_DRM_KMS_FB_HELPER=y
CONFIG_DRM_FBDEV_EMULATION=y

# Additional required configs
CONFIG_FB=y
CONFIG_FB_MODE_HELPERS=y
CONFIG_FB_BCM2708=n
CONFIG_FRAMEBUFFER_CONSOLE=y
CONFIG_FRAMEBUFFER_CONSOLE_DETECT_PRIMARY=y

# CMA configuration
CONFIG_CMA=y
CONFIG_DMA_CMA=y

# Required for modern DRM
CONFIG_DRM_PANEL_BRIDGE=y
CONFIG_DRM_KMS_CMA_HELPER=y


CONFIG_RASPBERRYPI_FIRMWARE=y


# Core sound system must be built-in
CONFIG_SND=y
CONFIG_SND_SOC=y
CONFIG_SND_PCM=y

# Additional required sound configs
CONFIG_SND_PCM_ELD=y
CONFIG_SND_SOC_GENERIC_DMAENGINE_PCM=y
CONFIG_SND_SOC_HDMI_CODEC=y

# Core dependencies for VC4
CONFIG_COMMON_CLK=y
CONFIG_PM=y
CONFIG_DRM_VC4=y

CONFIG_SND_BCM2835=y
CONFIG_SND_SOC_BCM2835=y